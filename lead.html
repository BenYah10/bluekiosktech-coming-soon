<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title data-i18n="meta.title">BlueKioskTech.ca – Site en construction</title>
  <meta name="description" data-i18n="meta.desc"
        content="BlueKioskTech.ca développe des stations de désinfection en libre-service (99,99%). Gyms d’abord, puis bureaux et campus. Rejoignez la liste d’attente." />
  <link rel="canonical" href="https://www.bluekiosktech.ca/lead.html" />

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-B.png?v=4">
  <link rel="icon" href="./favicon-B.ico?v=4">
  <meta name="theme-color" content="#0b1020">
  <link rel="apple-touch-icon" sizes="180x180" href="./images/apple-touch-icon.png?v=4">

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet"/>

  <link rel="stylesheet" href="./coming-soon.css"/>

  <!-- Styles spécifiques à la page lead (assombrir select, unifier les inputs) -->
  <style>
    .lead-page .lead-grid input,
    .lead-page .lead-grid select,
    .lead-page .lead-grid textarea{
      background: rgba(2,6,23,.55);
      border: 1px solid rgba(148,163,184,.18);
      border-radius: 16px;
      color: var(--text);
      padding: 12px 14px;
      outline: none;
    }
    .lead-page .lead-grid input:focus,
    .lead-page .lead-grid select:focus,
    .lead-page .lead-grid textarea:focus{
      box-shadow: 0 0 0 3px var(--ring);
    }
    /* Assombrir le menu déroulant et ses options (selon navigateur) */
    .lead-page .lead-grid select{
      background-color: rgba(2,6,23,.85);
      color: var(--text);
    }
    .lead-page .lead-grid select option{
      background: #0b1020;
      color: var(--text);
    }
  </style>

  <!-- Fixer la langue depuis l’URL avant i18n -->
  <script>
    (function () {
      try {
        const p = new URL(window.location.href).searchParams;
        const lang = p.get("lang");
        if (lang === "fr" || lang === "en") localStorage.setItem("lang", lang);
      } catch(e) {}
    })();
  </script>
  <script src="./coming-soon.js" defer></script>
</head>

<body class="lead-page">
  <header class="site-header">
    <div class="wrap">
      <a href="/" class="brand">
        <img src="images/logo-ca.png" alt="BlueKioskTech.ca" />
      </a>
      <div class="socials">
        <a class="ig" href="https://www.instagram.com/bluekiosktech" target="_blank" rel="noopener" aria-label="Instagram">
          <svg class="ig-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <rect x="3" y="3" width="18" height="18" rx="5" ry="5" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="12" cy="12" r="4" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="17.5" cy="6.5" r="1.5" fill="currentColor"/>
          </svg>
          <span>Instagram</span>
        </a>
        <a class="fb" href="https://www.facebook.com/bluekiosktech/" target="_blank" rel="noopener" aria-label="Facebook">
          <svg class="fb-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <rect x="3" y="3" width="18" height="18" rx="5" ry="5" fill="none" stroke="currentColor" stroke-width="2"/>
            <text x="12" y="16" text-anchor="middle"
              font-family="system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif"
              font-size="12" font-weight="700" fill="currentColor">f</text>
          </svg>
          <span>Facebook</span>
        </a>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="grid-bg" aria-hidden="true"></div>

      <!-- Lang switch -->
      <div class="lang-switch" aria-label="Language switch">
        <button id="lang-fr" class="is-active" aria-pressed="true">FR</button>
        <button id="lang-en" aria-pressed="false">EN</button>
      </div>

      <div class="wrap hero-inner" style="max-width:920px">
        <h1 class="headline" data-i18n="hero.title">Le futur de l’hygiène clean-tech arrive.</h1>
        <p class="subtitle" data-i18n="hero.subtitle">
          Nous construisons un réseau de stations de désinfection en libre-service (99,99%). Gyms d’abord, puis bureaux et campus.
        </p>

        <!-- ===== Formulaire B2B complet ===== -->
        <form id="waitlist" name="waitlist" class="waitlist" method="POST" action="/api/waitlist">
          <!-- honeypot anti-spam -->
          <p hidden aria-hidden="true"><label>Ne pas remplir :<input name="bot-field"></label></p>

          <!-- langue UI -->
          <input type="hidden" name="Lang" id="waitlist-lang" value="fr" />

          <div class="lead-grid">
            <label class="full">
              <span data-i18n="lead.company">Nom de la compagnie</span>
              <input type="text" name="CompanyName" id="company" placeholder="BlueKiosk Inc." required />
            </label>

            <label>
              <span data-i18n="lead.activity">Activité</span>
              <select name="Activity" id="activity" required>
                <option value="" disabled selected data-i18n="lead.activity.placeholder">Choisir…</option>
                <option value="gym" data-i18n="lead.activity.gym">Gym</option>
                <option value="sport_complex" data-i18n="lead.activity.complex">Complexe sportif</option>
                <option value="office" data-i18n="lead.activity.office">Entreprise (bureaux)</option>
                <option value="campus" data-i18n="lead.activity.campus">Campus</option>
                <option value="university" data-i18n="lead.activity.university">Université</option>
                <option value="hospital" data-i18n="lead.activity.hospital">Hôpitaux</option>
              </select>
            </label>

            <label>
              <span data-i18n="lead.audience">Nb d’adhérents/employés/étudiants</span>
              <!-- id="machines" est conservé pour compat JS existant ; name=AudienceCount (nouveau) -->
              <input type="number" name="AudienceCount" id="machines" placeholder="ex. 1500" required />
              <!-- compat API actuelle : on alimente aussi MachineCount en caché -->
              <input type="hidden" name="MachineCount" id="machinesHidden" />
            </label>

            <label class="full">
              <span data-i18n="lead.address">Adresse</span>
              <input type="text" name="Address" id="address" placeholder="123 Rue Principale, Ville, Pays" required />
            </label>

            <label class="full">
              <span data-i18n="lead.message">Message (500 mots max)</span>
              <textarea name="Message" id="message" rows="5" placeholder="Décrivez votre contexte, vos besoins…" data-maxwords="500"></textarea>
            </label>

            <div class="field full">
              <input id="waitlist-email" name="Email" type="email"
                     placeholder="vous@entreprise.com"
                     data-i18n-placeholder="waitlist.placeholder" required />
              <button type="submit" class="btn-primary" data-i18n="lead.submit">
                Envoyer & rejoindre la liste d’attente
              </button>
            </div>

            <p class="foot full" data-i18n="waitlist.disclaimer">
              Zéro spam. Nous vous écrirons uniquement au lancement.
            </p>
            <div id="wl-done" class="wl-done full" role="status" aria-live="polite"></div>
          </div>
        </form>
        <!-- ===== /form ===== -->
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      <div class="footer-content">
        <div class="footer-section">
          <h3>BlueKiosk.tech</h3>
          <p data-i18n="footer.tagline">Révolutionnons l'hygiène sportive ensemble.</p>
        </div>

        <div class="footer-section">
          <h3 data-i18n="footer.contact.title">Contact</h3>
          <p><a href="mailto:admin@bluekiosk.tech">admin@bluekiosk.tech</a></p>
          <p><a id="link-privacy" href="./privacy.html" target="_blank" rel="noopener" data-i18n="footer.privacy">Politique de confidentialité</a></p>
        </div>
      </div>

      <div class="footer-bottom">
        <p data-i18n="footer.copy">© <span id="year"></span> BlueKiosk.tech — Tous droits réservés.</p>
      </div>
    </div>
  </footer>

  <!-- Pré-remplir l’email depuis ?email=... et synchroniser AudienceCount -> MachineCount -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      try {
        const p = new URL(window.location.href).searchParams;
        const e = p.get("email");
        if (e) {
          const el = document.getElementById("waitlist-email");
          if (el) el.value = e;
        }
      } catch (err) {}

      // Sync AudienceCount -> MachineCount (compat API actuelle)
      const aud = document.getElementById("machines"); // id conservé
      const hid = document.getElementById("machinesHidden");
      function sync() { if (hid && aud) hid.value = aud.value || ""; }
      aud && aud.addEventListener("input", sync);
      document.getElementById("waitlist")?.addEventListener("submit", sync);
    });
  </script>
</body>
</html>
